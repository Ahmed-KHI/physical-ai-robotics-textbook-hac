---
sidebar_position: 2
---

import PersonalizationButton from '@site/src/components/PersonalizationButton';
import TranslationButton from '@site/src/components/TranslationButton';

# Week 6: Gazebo Fundamentals

Master Robot Simulation

<div style={{display: 'flex', gap: '1rem', marginBottom: '2rem', flexWrap: 'wrap'}}>
  <PersonalizationButton content={typeof window !== 'undefined' ? document.querySelector('article')?.innerText || '' : ''} filePath="/docs/module-2/week-6" />
  <TranslationButton content={typeof window !== 'undefined' ? document.querySelector('article')?.innerText || '' : ''} />
</div>

## üéØ Learning Objectives

- Launch and navigate Gazebo interface
- Create worlds and spawn models
- Configure physics properties
- Simulate sensors (camera, LiDAR, IMU)
- Integrate with ROS 2

## üöÄ Getting Started with Gazebo

### Launch Gazebo

```bash
# Empty world
gazebo

# With a world file
gazebo worlds/cafe.world

# Paused start
gazebo --pause
```

### Gazebo Interface

**Main Components:**
- **Scene**: 3D view of simulation
- **Insert Tab**: Add models
- **World Tab**: Configure physics
- **Time Controls**: Play/pause/step

## üåç Creating Worlds

### Basic World File

`my_world.world`:
```xml
<?xml version="1.0"?>
<sdf version="1.6">
  <world name="default">
    
    <!-- Sun for lighting -->
    <include>
      <uri>model://sun</uri>
    </include>
    
    <!-- Ground plane -->
    <include>
      <uri>model://ground_plane</uri>
    </include>
    
    <!-- Add a box -->
    <model name="box">
      <pose>0 0 0.5 0 0 0</pose>
      <static>false</static>
      <link name="link">
        <collision name="collision">
          <geometry>
            <box>
              <size>1 1 1</size>
            </box>
          </geometry>
        </collision>
        <visual name="visual">
          <geometry>
            <box>
              <size>1 1 1</size>
            </box>
          </geometry>
          <material>
            <ambient>1 0 0 1</ambient>
          </material>
        </visual>
      </link>
    </model>
    
  </world>
</sdf>
```

### Launch World

```bash
gazebo my_world.world
```

## ‚öôÔ∏è Physics Configuration

### Gravity

```xml
<physics type="ode">
  <gravity>0 0 -9.81</gravity>
  <max_step_size>0.001</max_step_size>
  <real_time_factor>1.0</real_time_factor>
</physics>
```

### Material Properties

```xml
<collision name="collision">
  <surface>
    <friction>
      <ode>
        <mu>0.8</mu>
        <mu2>0.8</mu2>
      </ode>
    </friction>
    <bounce>
      <restitution_coefficient>0.5</restitution_coefficient>
    </bounce>
  </surface>
</collision>
```

## üì∑ Sensor Simulation

### Camera Sensor

```xml
<sensor name="camera" type="camera">
  <update_rate>30</update_rate>
  <camera>
    <horizontal_fov>1.047</horizontal_fov>
    <image>
      <width>640</width>
      <height>480</height>
      <format>R8G8B8</format>
    </image>
    <clip>
      <near>0.1</near>
      <far>100</far>
    </clip>
  </camera>
  <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
    <ros>
      <namespace>robot</namespace>
      <remapping>camera/image_raw:=image_raw</remapping>
    </ros>
  </plugin>
</sensor>
```

### LiDAR Sensor

```xml
<sensor name="lidar" type="ray">
  <ray>
    <scan>
      <horizontal>
        <samples>360</samples>
        <resolution>1</resolution>
        <min_angle>-3.14159</min_angle>
        <max_angle>3.14159</max_angle>
      </horizontal>
    </scan>
    <range>
      <min>0.1</min>
      <max>10.0</max>
    </range>
  </ray>
  <plugin name="lidar_controller" filename="libgazebo_ros_ray_sensor.so">
    <ros>
      <remapping>~/out:=scan</remapping>
    </ros>
  </plugin>
</sensor>
```

## ü§ñ Spawning Robots

### Using URDF

```bash
# Spawn robot from URDF
ros2 run gazebo_ros spawn_entity.py \
  -entity my_robot \
  -file robot.urdf \
  -x 0 -y 0 -z 0.5
```

### Robot with Plugins

Add to URDF:
```xml
<gazebo>
  <plugin name="differential_drive" filename="libgazebo_ros_diff_drive.so">
    <update_rate>50</update_rate>
    <left_joint>left_wheel_joint</left_joint>
    <right_joint>right_wheel_joint</right_joint>
    <wheel_separation>0.4</wheel_separation>
    <wheel_diameter>0.2</wheel_diameter>
    <command_topic>cmd_vel</command_topic>
    <odometry_topic>odom</odometry_topic>
  </plugin>
</gazebo>
```

## üîå ROS 2 Integration

### Launch Gazebo with ROS 2

```python
from launch import LaunchDescription
from launch_ros.actions import Node
from launch.actions import ExecuteProcess

def generate_launch_description():
    return LaunchDescription([
        # Start Gazebo
        ExecuteProcess(
            cmd=['gazebo', '--verbose', 'my_world.world'],
            output='screen'
        ),
        
        # Spawn robot
        Node(
            package='gazebo_ros',
            executable='spawn_entity.py',
            arguments=[
                '-entity', 'my_robot',
                '-file', 'robot.urdf'
            ]
        ),
    ])
```

## üí™ Week 6 Project

**Mobile Robot Simulator**

Build simulation with:
- Differential drive robot
- Camera and LiDAR sensors
- Test environment with obstacles
- ROS 2 teleoperation
- Sensor data visualization

**Requirements:**
- Robot follows cmd_vel commands
- Camera publishes images to ROS 2
- LiDAR data visible in RViz
- Launch file for complete setup

[Continue to Week 7 ‚Üí](/docs/module-2/week-7)
